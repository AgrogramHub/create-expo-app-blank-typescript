name: Commit Checks

on:
  push:
    branches:
      - master # veya kullanmakta olduğunuz ana branch adı
    paths:
      - '**/*.ts'
      - '.github/workflows/commit-check.yml'
      - '.github/workflows/commit-template.txt'

jobs:
  check:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Install Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18' # Projenizin gereksinimlerine göre ayarlayın

      - name: Install dependencies
        run: yarn install

      - name: Check commit message format
        run: |
          # Install commitlint globally if needed
          yarn global add @commitlint/cli @commitlint/config-conventional

          # Check commit messages
          npx --no-install commitlint --from=HEAD~1 --to=HEAD || {
            echo "Commit message format is incorrect."
            exit 1
          }

      - name: Check commit tense
        run: |
          npx ts-node check-tense-commit.ts || {
            exit 1
          }
